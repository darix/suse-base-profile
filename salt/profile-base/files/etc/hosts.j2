#
# {{ pillar.greeting }}
#
# hosts         This file describes a number of hostname-to-address
#               mappings for the TCP/IP subsystem.  It is mostly
#               used at boot time, when no name servers are running.
#               On small systems, this file can be used instead of a
#               "named" name server.
# Syntax:
#
# IP-Address  Full-Qualified-Hostname  Short-Hostname
#
# {{ pillar.greeting }}
#

{%- for ip_address, hostnames in pillar.network.resolver.hosts.items() %}
{{ "{:<42}".format(ip_address) }} {{ hostnames | join(' ') }}
{%- endfor %}

{%- for mine_config in pillar.network.resolver.get("hosts_mine", []) %}
  {%- for hostname, ip_addresses in salt["mine.get"](mine_config['mine_match'], mine_config['mine_function'], tgt_type="compound").items() %}
    {%- for ip_address in ip_addresses %}
{{ "{:<42}".format(ip_address) }} {{ hostname }}
    {%- endfor %}
  {%- endfor %}
{%- endfor %}